<%
=begin %>

<div class='container px-5 px-sm-0'>
  <div class='row'>
    <div class='col-md-3'>
      <h2>会員情報</h2>
      <%= render 'info', customer: @customer %>
      <h2 class="mt-3">新しい情報ソース</h2>
      <%= render 'public/sources/form', source: @source %>
    </div>
    <div class='col-md-8 offset-md-1'>
      <h2>投稿情報ソース一覧</h2>
      <%= render 'public/sources/index',sources: @sources %>
    </div>
  </div>
</div>

<%
=end %>

<div class="container">
    <div class="row">
      <div class='col-md-12'>
            <% unless @sources.present? %>
              <h1><%#= @customer.nickname %>さんがいいねしている情報ソースはありません。</h1>
            <% else %>
              <table class='table table-hover table-inverse'>
                <h1>いいね一覧</h1>
                    <thead>
                      <tr>
                        <th>投稿者</th>
                        <th>目的</th>
                        <th>参考(URL)</th>
                        <th>評価コメント</th>
                        <th>評価</th>
                        <!--<th>recommended_rank</th>-->
                        <th>いいね</th>
                        <th>コメント数</th>
                        <th>閲覧数</th>
                        <th>投稿日</th>
                      </tr>
                    </thead>
                  <% @sources.each do |source|%>
                    <tbody>
                        <tr>
                          <td><%= link_to(source.customer) do %>
                            <%= image_tag source.customer.get_profile_image(50,50) %><br>
                            <%= source.customer.nickname %>
                            <% end %>
                          </td>
                  
                          <td><%= link_to source.purpose, source_path(source.id) %></td>
                          
                          <td><%= text_url_to_link(h(source.source)).html_safe %></td>
                          <td><%= source.performance_review %></td>
                          <!--星評価表示機能-->
                          <td>
                          <div class="relative-source-rate">
                            <span id="star-rate-<%= source.id %>"></span>
                            <script>
                              $('#star-rate-<%= source.id %>').empty();
                              $('#star-rate-<%= source.id %>').raty({
                                size: 36,
                                starOff: "<%= asset_path('star-off.png') %>",
                                starOn: "<%= asset_path('star-on.png') %>",
                                starHalf: "<%= asset_path('star-half.png') %>",
                                half: true,
                                readOnly: true,
                                score: "<%= source.rate %>",
                              });
                            </script>
                          </div>
                          </td>
                          <!--いいね機能追加-->
                        
                            <div id="like_buttons_<%= source.id %>" >
                              <%= render 'public/likes/likes', source: source %>
                            </div>

                          <!--コメント件数表示-->
                          <td>
                                  <i class="fas fa-comment-dots"></i><%= source.comments.size %>
                          </td>
                          <td><i class="fas fa-solid fa-eye"></i><%= source.view_counts.count %></td>
                          <td><%= source.created_at.strftime('%Y/%m/%d') %></td>
                  
                        </tr>
                    </tbody>
                  <% end %>
              </table>
            <% end %>
    </div>
  </div>
  <%#= paginate @customers %>
</div>
